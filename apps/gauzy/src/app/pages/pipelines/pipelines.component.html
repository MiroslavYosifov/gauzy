<nb-card>
  <nb-card-header>
    <h4 [innerHTML]="'PIPELINES_PAGE.HEADER' | translate"></h4>
  </nb-card-header>
  <nb-card-body>
    <nb-actions>
      <nb-action>
        <nb-select [(ngModel)]="organizationId" (selectedChange)="updatePipelines()"
                   [placeholder]="'FORM.PLACEHOLDERS.ORGANIZATION' | translate" [style.whiteSpace]="'pre'">
          <nb-option [innerHTML]="'FORM.PLACEHOLDERS.ORGANIZATION' | translate" [style.whiteSpace]="'pre'" ></nb-option>
          <nb-option *ngFor="let userOrganization of userOrganizations"
                     [innerHTML]="userOrganization.organization.name"
                     [value]="userOrganization.organization.id"
                     [style.whiteSpace]="'pre'"
          ></nb-option>
        </nb-select>
      </nb-action>
      <nb-action>
        <nb-form-field>
          <input
            [placeholder]="'FORM.FILTER' | translate"
            (ngModelChange)="filterPipelines()"
            [(ngModel)]="name"
            type="text"
            nbInput
          >
          <nb-icon icon="search-outline" pack="eva" nbSuffix></nb-icon>
        </nb-form-field>
      </nb-action>
      <nb-action>
        <button (click)="gotoForm({ pipeline: { name: name, organizationId: organizationId } })"
                style="cursor: pointer"
                status="primary"
                type="button"
                nbButton
        >
          <nb-icon icon="plus-circle-outline" pack="eva"></nb-icon>
        </button>
      </nb-action>
      <nb-action *ngIf="pipeline">
        <button (click)="gotoForm({ pipeline: pipeline })"
                style="cursor: pointer"
                status="info"
                type="button"
                nbButton
        >
          <nb-icon icon="edit-outline" pack="eva"></nb-icon>
        </button>
      </nb-action>
      <nb-action *ngIf="pipeline">
        <button
          (click)="deletePipeline()"
          style="cursor: pointer"
          status="danger"
          type="button"
          nbButton
        >
          <nb-icon icon="trash-2-outline" pack="eva"></nb-icon>
        </button>
      </nb-action>
    </nb-actions>

    <br>
    <ng2-smart-table
      (rowSelect)="pipeline = $event.data"
      [settings]="smartTableSettings"
      [source]="pipelines"
      [title]="false"
    ></ng2-smart-table>
  </nb-card-body>
</nb-card>
